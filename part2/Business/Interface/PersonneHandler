using part2.Models;
using Infrastructure.Models;

public class PersonneHandler : IPersonneHandler
{
    private PersonneContext _context;

    public PersonneHandler(PersonneContext context)
    {
        _context = context;
    }
    public async Task<bool> AddPersonne(Personne personne)
    {
        if (HasValidAge(personne.DateDeNaissance))
        {
            _context.PersonneItems.Add(personne);
            await _context.SaveChangesAsync();
            return true;
        }
        else
            return false;
    }

    public async Task<IEnumerable<GetPersonnesDto>> GetPersonnes()
    {
        var data = await _context.PersonneItems.OrderBy(a => a.Nom);

        return new List<GetPersonnesDto>();


    }

    private bool HasValidAge(DateTime age)
    {
        return age.Year - DateTime.Now.Year < 150;
    }
}
